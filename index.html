<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Video & áº¢nh tá»« API</title>
  <style>
    body { font-family:system-ui,Arial; background:#111; color:#fff; text-align:center; padding:18px }
    video, img { width:90%; max-width:500px; border-radius:12px; margin:10px auto; display:block; }
    h1{margin:6px 0 12px}
    button{padding:8px 14px;border-radius:8px;border:none;background:#0af;color:#000;cursor:pointer}
  </style>
</head>
<body>
  <h1>ğŸ¬ Video & ğŸ“¸ áº¢nh Auto</h1>
  <video id="video" controls autoplay muted loop></video>
  <button id="reloadVideo">Äá»•i video</button>
  <img id="image" alt="áº¢nh API">

  <script>
    // ----- THAY CHá»– NÃ€Y: Ä‘á»•i thÃ nh Worker URL cá»§a báº¡n -----
    const proxy = "https://crimson-forest-1f5f.hatient444.workers.dev";
    const videoPath = "/api/videos/gai";         // worker Ä‘Ã£ map Ä‘áº¿n api.zeidteam.xyz/videos/gai
    const imagePath = "/api/images/gaisexy";     // worker Ä‘Ã£ map Ä‘áº¿n api.zeidteam.xyz/images/gaisexy

    const videoEl = document.getElementById('video');
    const imgEl = document.getElementById('image');
    const btn = document.getElementById('reloadVideo');

    async function fetchJson(url) {
      const res = await fetch(url);
      // náº¿u tráº£ nguyÃªn file binary (video stream) thÃ¬ .json() sáº½ fail;
      // á»Ÿ Ä‘Ã¢y endpoints tráº£ JSON nÃªn safe to use .json()
      return res.json();
    }

    async function loadVideo() {
      try {
        const data = await fetchJson(proxy + videoPath);
        // API gá»‘c tráº£: {status: true, data: "https://files...mp4", ...}
        if (data && data.status && data.data) {
          videoEl.src = data.data;
          videoEl.play().catch(()=>{ /* autoplay cÃ³ thá»ƒ bá»‹ cháº·n trÃªn mobile */ });
        } else {
          console.error('Video API tráº£ khÃ¡c cáº¥u trÃºc:', data);
        }
      } catch (e) {
        console.error('Lá»—i loadVideo:', e);
      }
    }

    async function loadImage() {
      try {
        const data = await fetchJson(proxy + imagePath);
        if (data && data.status && data.data) {
          // hiá»‡u á»©ng mÆ°á»£t
          imgEl.style.opacity = 0;
          setTimeout(()=> {
            imgEl.src = data.data;
            imgEl.style.opacity = 1;
          }, 300);
        } else {
          console.error('Image API tráº£ khÃ¡c cáº¥u trÃºc:', data);
        }
      } catch (e) {
        console.error('Lá»—i loadImage:', e);
      }
    }

    btn.onclick = loadVideo;
    loadVideo();
    loadImage();
    setInterval(loadImage, 5000); // Ä‘á»•i áº£nh 5s
  </script>
</body>
</html>
